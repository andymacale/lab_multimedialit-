\documentclass[openany]{book}
\usepackage[italian]{babel}
% ... altri pacchetti ...
\usepackage[
    top=2cm,
    bottom=2cm,
    left=2cm,
    right=2cm,
    headheight=14pt % Aggiungi questo se usi intestazioni, altrimenti LaTeX potrebbe lamentarsi.
]{geometry}
% Imposta la profondità dell'indice:
% Aumenta la porzione di pagina che può essere occupata dalle figure in alto (0.9 = 90%)
\renewcommand{\topfraction}{0.9} 
% Permette che la figura occupi almeno il 90% dello spazio superiore
\renewcommand{\textfraction}{0.1} 
% Permette che resti solo il 10% di testo nella pagina superiore
\setcounter{topnumber}{2} 
% Permette 2 figure in cima alla pagina
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{float}
\usepackage{caption}
\usepackage{mathtools}
\usepackage{pagecolor} % Necessario per \pagecolor
\usepackage{chngcntr} % <-- PACCHETTO AGGIUNTO
\usepackage{amsmath}
\usepackage{array}
\usepackage{fancyhdr}
% Definisce un nuovo tipo di colonna chiamato 'C' (maiuscolo) che centra orizzontalmente e verticalmente.
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}


\usepackage{makecell} 
% \renewcommand{\arraystretch}{1.5}
\tolerance=3000
% Definizione Colori
\definecolor{frontespizio}{HTML}{7DF9FF}
\definecolor{normale}{HTML}{FFFFFF}
\AtBeginDocument{\fontsize{11}{12}\selectfont}

\usepackage{etoolbox}
\makeatletter
\patchcmd{\listoffigures}{\clearpage}{}{}{} % Rimuove \clearpage da listoffigures
\makeatother

%\setmainfont{Arial} 
\graphicspath{{immagini/}}

% Modulo (PART) - Come nell'immagine 1
\titleformat{\part}[display]
  {\normalfont\Large\bfseries\centering\fontsize{30}{20}\selectfont} % Formato del titolo
  {\MakeUppercase{\partname}\ \thepart:} % Etichetta (es. MODULO 1)
  {10pt} % Spazio tra etichetta e titolo
  {\MakeUppercase} % Trasforma il titolo in maiuscolo
  [\vspace{1ex}] % Spazio aggiuntivo dopo il titolo (opzionale)

% Capitolo (CHAPTER) - Come nell'immagine 2
\titleformat{\chapter}[display]
  {\normalfont\Huge\bfseries\fontsize{18}{20}\selectfont} % Formato del titolo
  {\chaptertitlename\ \thechapter:} % Etichetta (es. Capitolo 1)
  {1em} % Spazio tra etichetta e titolo
  {} 

% Sezione (SECTION) - Come nell'immagine 2 (1.1)
\titleformat{\section}
  {\normalfont\Large\bfseries\fontsize{15}{17}\selectfont} % Formato del titolo
  {\thesection:} % Etichetta (es. 1.1)
  {1em} % Spazio orizzontale
  {}

% Sottosezione (SUBSECTION) - Come nell'immagine 2 (1.1.1)
\titleformat{\subsection}
  {\normalfont\large\bfseries\itshape\fontsize{12}{14}\selectfont} % Formato del titolo
  {\thesubsection:} % Etichetta (es. 1.1.1)
  {1em} % Spazio orizzontale
  {} % Non fare nulla al titolo
\counterwithout{figure}{chapter}
\counterwithout{chapter}{part} 
\setcounter{tocdepth}{2}

\begin{document}

% ----------------------------------------------------
% INIZIO MATERIA PRELIMINARE (Numerazione Romana)
% ----------------------------------------------------

% 1. IMPOSTA LA SEZIONE ROMANA (DEVE ESSERE PRIMA)
\frontmatter 

% 2. IMPOSTA IL CONTATORE A -1 (PER PAGINA 0)
% La pagina successiva (\begin{titlepage}) sarà la pagina -1 + 1 = 0.
\setcounter{page}{-1} 

% 3. IMPOSTA IL COLORE DI SFONDO PER LA PAGINA 0
\pagecolor{frontespizio} 

% --- Frontespizio Personalizzato (Pagina 0) ---
\begin{titlepage}
    
    \thispagestyle{empty} % Nasconde il numero 0.
    
    \centering    
    \includegraphics[width=11cm]{sfondo} 
    \vspace{0.5cm}
    
    % --- TITOLO E DATI ---
    {\Huge\bfseries Laboratorio di multimedialità \par}
    {\large A.A. 2024-25 \par}
    {\large Andrea Macale \par}
    
    % --- Spazio in fondo ---
    \vfill
    
\end{titlepage}

% ----------------------------------------------------
% --- INDICE (Inizia con Pagina i) ---

% Cambia il colore di sfondo per l'indice
\pagecolor{normale}
\setcounter{page}{1}
\pagestyle{plain} % Mostra il numero in fondo alla pagina (i, ii, iii...)
\tableofcontents
\listoffigures

% ----------------------------------------------------
% INIZIO CORPO PRINCIPALE (Numerazione Araba da 1)
\mainmatter 
\pagestyle{fancy}
\fancyhf{} % Pulisce gli header e i footer

% Intestazioni (Headers)
% Pagina PARI (Sinistra): Titolo della Sezione/Capitolo
\fancyhead[LE]{\nouppercase{\rightmark}} 
% Pagina DISPARI (Destra): Titolo della Part/Capitolo
\fancyhead[RO]{\nouppercase{\leftmark}} 

% Piè di Pagina (Footers) - Numerazione alternata
\fancyfoot[LE,RO]{\thepage} 

\renewcommand{\headrulewidth}{0.4pt} % Aggiunge una linea orizzontale
\renewcommand{\footrulewidth}{0pt} % Rimuove la linea dal piè di pagina

% Inizia la numerazione araba da 1 di default.

\part{Immagini}
\chapter{Elaborazione delle immagini}
\input{capitoli/cap1}
\chapter{Filtri nel dominio spaziale}
\input{capitoli/cap2}
\chapter{Filtri nel dominio della frequenza}
\input{capitoli/cap3}
\chapter{Trasformata Wavelet}
\input{capitoli/cap4}
\chapter{Processo di compressione delle immagini}
\input{capitoli/cap5}
\chapter{Formato JPEG}
\input{capitoli/cap6}
\chapter{Fondamenti della percezione della profondità}
\input{capitoli/cap7}
\part{Video}
\chapter{Creazione dei video}
\end{document}